TODO-------------------------------------------------------------------------------------------------

---BUGS
	- Chat: crash when all friends are added to group
	- Chat: crash when blocking user in view (that does not update) and user send messages
		- maybe: do a socket to interface chat with profile
	<!-- - Chat: backend crash on user update (ban, mute)
		- PrismaClientKnownRequestError: Invalid `this.prisma.subscribed.update()` invocation in
			backend   | /app/src/chat/chat.service.ts:310:44
			backend   |   307 });
			backend   |   308 if (isOwner.length > 0)
			backend   |   309   return null;
			backend   | → 310 let res = await this.prisma.subscribed.update(
			backend   | An operation failed because it depends on one or more records that were required but not found. Record to update not found.
			backend   |     at ni.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:124:6817)
			backend   |     at ni.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:124:6206)
			backend   |     at ni.request (/app/node_modules/@prisma/client/runtime/library.js:124:5926)
			backend   |     at l (/app/node_modules/@prisma/client/runtime/library.js:129:10023)
			backend   |     at ChatService.editUserSubscription (/app/src/chat/chat.service.ts:310:15) -->

	- LiveStream table: crash when a blacklisted user is playing DONE
	- Game: not Playable
	- Game: bug in score points

	- server side validation
	

----MUST-DO
		-  build test +  Safari 					DONE
		-  reactivity offline online				DONE
		-  resolve exit crash cutsomization screen	DONE
		-  resolve 2fa								DONE
		-  resolve remove friends					DONE
		-  BLOCK and profile buttons NOT REACTIVE	DONE

----FULL TEST CHECKLIST
		- check reactivity
		- check responsivity
		- check invites, streaming, matchmaking - try to make it crash on a single window
		- check friendships - add, remove, block
		- check chat - see options  on subject
		- stress test - check 5/10 players on the game
		- browser compatibility : chrome, firefox, safari
		- error handling / warning : 500, crash, does not work
		- jwt expired
		- 2fa login redirect

----TODO CHECKLIST BEFORE PUSHING
		- delete prisma populate
		- when all is done, test with 5+ players, 10+ games
		- full test from build version - evaluation mode, check against subject/correction sheet
		- clean console.log + comments
		- find a solution for env files
		- delete node_modules
		- remove urls for images and save them locally

----PROBABLY WON'T HAVE TIME
		- MM | handle //! //TODO
		- MM | npm update to latest stable library version (on clean status) - node is too old?
		- MM | 1v1 games should not count for ladder_lvl
		- MM | difference between matchmaking (ladder mode) games and invite (1v1) games should be made	
		- add WS to have reactive achievements
		- convert chat code to typescript (currently in js)
		- check that whole front is typescript compliant
		- Game : slow paddle - make it smoother and more reactive
		- beautify, consistent UI

DONE-------------------------------------------------------------------------------------------------
THURSDAY
- ARI | fixed : streaming : customize bug : rainbow on default and no pitch color on customized 
- ARI | re-read subject / correction / todo and refix stuff if needed
- ARI | test remove from friends, username/otp update
- ARI | perform full quality test + stress test with 5 students
- ARI | correct and repeat

- RIPA | chat : error handling / warning : 500, crash, does not work

- MM | SQL injections protected
- MM | server-side sanitization (any user input)
- MM | DialogEdit : bug, does not update username, avatar ok (issue with string validation ?) - probably why it does not close (first debug this), added debug logs, cannot find the issue
(fixed profile complete - achievement conflict)
- MM | Dialog2FA : same problem
WEDNESDAY
- ARI | browser compatibility : chrome ok, firefox 'scroll anchoring disabled', safari NOK
- ARI | npm update save dev + tested profile game chat
- ARI | check reactivity front + do we need to take out .value when using store
- ARI | error handling / warning : 500, crash, does not work - resolved warnings
- ARI | checking overall flow and UI bugs
- ARI | add WS to have reactive status (user and its friends) - not perfect but is working enough for our main uses
- ARI | handled my  '//!' and '//TODO'
- ARI | game : fix UI when full screen
- RIPA | chat : browser compatibility : chrome, firefox, safari (if time whole app + list what needs to be corrected)
- RIPA | tweak chat UI (don't allow overflow) => so notifications can be on top
- RIPA | chat : SQL injections protected (this we need to agree how to do it the 3 of us)
- RIPA | chat : server-side sanitization (any user input) (this we need to agree how to do it the 3 of us)
TUESDAY
- ARI | npm update to latest stable library version => cannot because node too old ?
- ARI | clean console.log & comments
- ARI | compliance with Vuetify@latest
- ARI | removed visibility of status from public and blocked profile
- ARI | added status in the navside bar
- ARI | prepared reactivity for status (avatar, friends, navsidebar) => now need to add emit ws functions backend + playerstore
- ARI | prevent players to watch their own games (host game or guest game)
- ARI | added : back : active players and queuers cannot join, invite, or start a new game
- ARI | added : front : users who are in the process of invite, stream, play cannot join, invite, or start a new game !if a different window then it does not protect against conflict
- ARI | resolved : at the start of customization clear when there has been another game before
MONDAY
- ARI | status : maybe two instanciations of the map
- MM | Match History : double entry : Game.gateway:382:this.gameService.setGameasFinished(frame);
- ARI | invitation : risolved cancelling invite bug + enforced receiver and sender availability
- ARI | fixed UI DialogEdit to make it more intuitive
- ARI | visibility match history and achievement set to public
risolved by itself
- ARI | bug when game has been played : weirdly, looks ok


















1. Handle Images url to png (or blob) files in db
2. Add "insert into Achievements.." script by hand
3. Do "Add friend", etc. stuff
3. Clean Store
	3.1. Think if we need to remove loading in PlayerStore
2. Toasts


3. Check encryption of twofaSecret in db
4. make achievement name unique in db
4. make avatar NOT unique in db
5. remove @Protected() decorator on 2fa remove endpoint in back


1. "files in public directory are served from the root path..." -- when starting vite DONE
1 Fix vue static files served -- DONE
1 avatar in notification -- DONE
	- fetch avatar from endpoint url -- DONE


DONE
Rejection means removal of friend or rejection of request
	- call action when clicking "remove" button
	- call action when rejecting request
understand who is the requestor and who the recipient DONE

As a new friendship is accepted, add automatically to friends DONE

Rethink updateFriendship event DONE

3 clean friendships



06/11/2023

add button for blocking profile in public profile DONE 

add a rule in players controller that doesn't let us get users that blocked us DONE

forbid a user to block itself DONE

Forbid users to block user that already blocked them DONE (in constraints)

---------------------------------------

Implementare Ricerca Amici

Implementare pagina di prompt iniziale DONE

Username must be reactive

IMPLEMENT JWT IN WEBSOCKETS

Public profile, mostrare un bottone o l'altro a seconda che l'utente sia bloccato oppure no DONE (controllare bene peró )






DONE
BlockUser
	- make so that when each user unblock each other, record in BeFriends table gets destroyed
		(so that new friend requests are possible) DONE
	- delete updateRequest in gateway and reformulate in playerStore DONE
	- make reactive and understand what makes the "Block" button reactive DONE
	- fix any bug BOOOH ??